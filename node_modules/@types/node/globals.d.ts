document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('credentialForm');
    const credentialsList = document.getElementById('credentialsList');

    const fetchCredentials = async () => {
        const response = await fetch('http://localhost:3000/credentials');
        const credentials = await response.json();
        credentialsList.innerHTML = '';
        credentials.forEach(credential => {
            const card = document.createElement('div');
            card.classList.add('credential-card');
            card.innerHTML = `
                <h3>${credential.name}</h3>
                <p>${credential.description}</p>
                <button onclick="deleteCredential('${credential._id}')">Delete</button>
            `;
            credentialsList.appendChild(card);
        });
    };

    const addCredential = async (name, description) => {
        await fetch('http://localhost:3000/credentials', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ name, description })
        });
        fetchCredentials();
    };

    const deleteCredential = async (id) => {
        await fetch(`http://localhost:3000/credentials/${id}`, {
            method: 'DELETE'
        });
        fetchCredentials();
    };

    form.addEventListener('submit', (event) => {
        event.preventDefault();
        const name = form.name.value;
        const description = form.description.value;
        addCredential(name, description);
        form.reset();
    });

    fetchCredentials();
});
